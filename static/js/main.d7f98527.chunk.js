(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){e.exports={BreadBottom:"BurgerIngredient_BreadBottom__2uxvu",BreadTop:"BurgerIngredient_BreadTop__1p4xb",Seeds1:"BurgerIngredient_Seeds1__4MtA-",Seeds2:"BurgerIngredient_Seeds2__2EemD",Meat:"BurgerIngredient_Meat__2l-54",Cheese:"BurgerIngredient_Cheese__3j3kU",Salad:"BurgerIngredient_Salad__-SXB2",Bacon:"BurgerIngredient_Bacon__17wuR"}},20:function(e,t,n){e.exports={SideDrawer:"SideDrawer_SideDrawer__1RGC3",Logo:"SideDrawer_Logo__2QO0t",Open:"SideDrawer_Open__1n6ei",Close:"SideDrawer_Close__2Eyc4",DesktopOnly:"SideDrawer_DesktopOnly__2ZDGX"}},23:function(e,t,n){e.exports={BuildControl:"BuildControl_BuildControl__29Wbf",Label:"BuildControl_Label__2aUT0",Less:"BuildControl_Less__3hccY",More:"BuildControl_More__1Gqot"}},24:function(e,t,n){e.exports={Input:"Input_Input__1Q9lZ",Label:"Input_Label__2-NZv",InputElement:"Input_InputElement__3o1E2",Invalid:"Input_Invalid__3TOwp"}},28:function(e,t,n){e.exports={Toolbar:"Toolbar_Toolbar__euiRy",Logo:"Toolbar_Logo__PGRTl",DesktopOnly:"Toolbar_DesktopOnly__o3uoP"}},33:function(e,t,n){e.exports={NavigationItem:"NavigationItem_NavigationItem__2t1iN",active:"NavigationItem_active__2uaZa"}},35:function(e,t,n){e.exports={BuildControls:"BuildControls_BuildControls__2ERri",OrderButton:"BuildControls_OrderButton__39pQu",enable:"BuildControls_enable__3HW7f"}},36:function(e,t,n){e.exports={Button:"Button_Button__3ngHV",Success:"Button_Success__OBG8u",Danger:"Button_Danger__2tX-r"}},45:function(e,t,n){e.exports={Content:"Layout_Content__HxA0v"}},46:function(e,t,n){e.exports=n.p+"static/media/burger-logo.b8503d26.png"},47:function(e,t,n){e.exports={Logo:"Logo_Logo__2p1Qb"}},48:function(e,t,n){e.exports={NavigationItems:"NavigationItems_NavigationItems__1t3Co"}},50:function(e,t,n){e.exports={Menu:"Menu_Menu__3-wgn"}},51:function(e,t,n){e.exports={Backdrop:"Backdrop_Backdrop__2tjBe"}},52:function(e,t,n){e.exports={Burger:"Burger_Burger__1yYRA"}},53:function(e,t,n){e.exports={Modal:"Modal_Modal__3tFx9"}},54:function(e,t,n){e.exports={Loader:"Spinner_Loader__2IrN9",load4:"Spinner_load4__2bP0b"}},55:function(e,t,n){e.exports={CheckoutSummary:"CheckoutSummary_CheckoutSummary__tRfoK"}},56:function(e,t,n){e.exports={ContactData:"ContactData_ContactData__6mE_Q"}},57:function(e,t,n){e.exports={Order:"Order_Order__mfHdu"}},58:function(e,t,n){e.exports={LoginScreen:"LoginScreen_LoginScreen__7Kyq3"}},61:function(e,t,n){e.exports=n(96)},66:function(e,t,n){},96:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(25),i=n.n(o),l=(n(66),n(2)),c=n(3),u=n(5),s=n(4),d=n(6),p=n(1),m=n(45),g=n.n(m),h=n(28),f=n.n(h),E=n(46),v=n.n(E),b=n(47),_=n.n(b),O=function(e){return a.a.createElement("div",{className:_.a.Logo},a.a.createElement("img",{alt:"logo",src:v.a}))},k=n(48),y=n.n(k),I=n(33),C=n.n(I),N=n(15),S=function(e){return a.a.createElement("li",{className:C.a.NavigationItem},a.a.createElement(N.b,{to:e.link,exact:!0,activeClassName:C.a.active},e.children))},j=function(e){return a.a.createElement("ul",{className:y.a.NavigationItems},a.a.createElement(S,{link:"/",active:!0},"Burger"),e.isAuth?a.a.createElement(S,{link:"/orders"},"Orders"):null,e.isAuth?a.a.createElement(S,{link:"/logout"},"Logout"):a.a.createElement(S,{link:"/login"},"Login"))},B=n(50),w=n.n(B),D=function(e){return a.a.createElement("div",{className:w.a.Menu,onClick:e.click},a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null))},R=function(e){return a.a.createElement("header",{className:f.a.Toolbar},a.a.createElement(D,{click:e.click}),a.a.createElement("div",{className:f.a.Logo},a.a.createElement(O,null)),a.a.createElement("nav",{className:f.a.DesktopOnly},a.a.createElement(j,{isAuth:e.isAuth})))},L=n(20),T=n.n(L),A=n(51),x=n.n(A),F=function(e){return e.show?a.a.createElement("div",{onClick:e.click,className:x.a.Backdrop}):null},H=function(e){var t=[T.a.SideDrawer,T.a.Close];return e.show&&(t=[T.a.SideDrawer,T.a.Open]),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:t.join(" "),onClick:e.click},a.a.createElement("div",{className:T.a.Logo},a.a.createElement(O,null)),a.a.createElement("nav",null,a.a.createElement(j,{isAuth:e.isAuth}))),a.a.createElement(F,{click:e.click,show:e.show}))},G=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).state={showSideDrawer:!1},n.sideDrawerHandler=function(){n.setState({showSideDrawer:!n.state.showSideDrawer})},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(R,{click:this.sideDrawerHandler,isAuth:this.props.isAuth}),a.a.createElement(H,{isAuth:this.props.isAuth,show:this.state.showSideDrawer,click:this.sideDrawerHandler}),a.a.createElement("main",{className:g.a.Content},this.props.children))}}]),t}(a.a.Component),U=Object(p.b)(function(e){return{isAuth:null!=e.login.token}})(G),M=n(8),V=n(60),q=n(52),P=n.n(q),Y=n(14),Q=n.n(Y),W=function(e){var t=null;switch(e.type){case"bread-bottom":t=a.a.createElement("div",{className:Q.a.BreadBottom});break;case"bread-top":t=a.a.createElement("div",{className:Q.a.BreadTop},a.a.createElement("div",{className:Q.a.Seeds1}),a.a.createElement("div",{className:Q.a.Seeds2}));break;case"meat":t=a.a.createElement("div",{className:Q.a.Meat});break;case"cheese":t=a.a.createElement("div",{className:Q.a.Cheese});break;case"salad":t=a.a.createElement("div",{className:Q.a.Salad});break;case"bacon":t=a.a.createElement("div",{className:Q.a.Bacon});break;default:t=null}return t},X=function(e){var t=Object.keys(e.ingredients).map(function(t){return Object(V.a)(Array(e.ingredients[t])).map(function(e,n){return a.a.createElement(W,{key:t+n,type:t})})}).reduce(function(e,t){return e.concat(t)},[]);return 0===t.length&&(t=a.a.createElement("div",null,"No ingredients, add some!")),a.a.createElement("div",{className:P.a.Burger},a.a.createElement(W,{type:"bread-top"}),t,a.a.createElement(W,{type:"bread-bottom"}))},K=n(35),Z=n.n(K),J=n(23),$=n.n(J),z=function(e){return a.a.createElement("div",{className:$.a.BuildControl},a.a.createElement("div",{className:$.a.Label},e.label),a.a.createElement("button",{disabled:e.disabled,className:$.a.Less,onClick:e.removeFunc},"Less"),a.a.createElement("button",{className:$.a.More,onClick:e.addFunc},"More"))},ee=Object(p.b)(function(e){return{isAuth:null!==e.login.token}})(function(e){return a.a.createElement("div",{className:Z.a.BuildControls},a.a.createElement("p",null,"Current cost: ",a.a.createElement("b",null,Number(e.cost).toFixed(2))),[{label:"Salad",type:"salad"},{label:"Bacon",type:"bacon"},{label:"Cheese",type:"cheese"},{label:"Meat",type:"meat"}].map(function(t){return a.a.createElement(z,{removeFunc:function(){return e.removeHandler(t.type)},addFunc:function(){return e.addHandler(t.type)},key:t.label,label:t.label,disabled:e.disabledInfo[t.type]})}),a.a.createElement("button",{onClick:e.wasOrdererClick,className:Z.a.OrderButton,disabled:e.orderBlocked},e.isAuth?"ORDER":"GO TO LOGIN SCREEN"," "))}),te=n(53),ne=n.n(te),re=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.show!==this.props.show||e.children!==this.props.children}},{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(F,{show:this.props.show,click:this.props.click}),a.a.createElement("div",{className:ne.a.Modal,style:{transform:this.props.show?"translateY(0)":"translateY(-100)",opacity:this.props.show?"1":"0",display:this.props.show?"block":"none"}},this.props.children))}}]),t}(a.a.Component),ae=n(36),oe=n.n(ae),ie=function(e){return a.a.createElement("button",{disabled:e.disabled,className:[oe.a.Button,oe.a[e.buttonType]].join(" "),onClick:e.click},e.children)},le=Object(p.b)(function(e){return{ingr:e.burgerBuilder.ingredients}})(function(e){var t=null;return e.ingr&&(t=Object.keys(e.ingredients).map(function(t){return a.a.createElement("li",{key:t},t," : ",e.ingredients[t])})),a.a.createElement("div",null,a.a.createElement("h1",null,"Your order:"),a.a.createElement("ul",null,t),a.a.createElement("p",null,"Cost: ",e.cost),a.a.createElement(ie,{buttonType:"Danger",click:e.cancelClick},"Cancel"),a.a.createElement(ie,{click:e.checkoutClick,buttonType:"Success"},"Continue"))}),ce=n(27),ue=n.n(ce),se=ue.a.create({baseURL:"https://burgerapp-59617.firebaseio.com/"}),de=n(54),pe=n.n(de),me=function(e){return a.a.createElement("div",{className:pe.a.Loader},"Loading")},ge=function(e,t){return function(n){function r(){var e,t;Object(l.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(t=Object(u.a)(this,(e=Object(s.a)(r)).call.apply(e,[this].concat(a)))).state={error:null},t.confirmError=function(){t.setState({error:null})},t}return Object(d.a)(r,n),Object(c.a)(r,[{key:"componentDidMount",value:function(){var e=this;this.reqInterceptor=t.interceptors.request.use(function(t){return e.setState({error:null}),t}),this.resInterceptor=t.interceptors.response.use(function(e){return e},function(t){e.setState({error:t})})}},{key:"copomentWillUnmount",value:function(){t.interceptors.request.eject(this.reqInterceptor),t.interceptors.response.eject(this.resInterceptor)}},{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(re,{show:this.state.error,click:this.confirmError},this.state.error?this.state.error.message:null),a.a.createElement(e,this.props))}}]),r}(a.a.Component)},he=function(e,t){return{type:"LOGIN_SUCCESS",token:e,userId:t}},fe=function(){return localStorage.removeItem("token"),localStorage.removeItem("expirationDate"),localStorage.removeItem("userId"),{type:"LOGIN_LOGOUT"}},Ee=function(e){return function(t){setTimeout(function(){return t(fe())},1e3*e)}},ve=function(e){return{type:"REDIRECT_CHANGE",urlRedirect:e}},be=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={orderBlocked:!0,wasOrdered:!1,loading:!1},n.possibleOrderHandler=function(e){return Object.keys(e).map(function(t){return e[t]}).reduce(function(e,t){return e+t},0)<=0},n.wasOrderedHandler=function(){n.props.isAuth?n.setState({wasOrdered:!0}):(n.props.changeURL("/checkout"),n.props.history.push("/login"))},n.cancelOrderHandler=function(){n.setState({wasOrdered:!n.state.wasOrdered})},n.checkoutHandler=function(){n.props.orderInit(),n.props.history.push("/checkout")},n.handleLoading=function(){var e=a.a.createElement(le,{checkoutClick:n.checkoutHandler,cost:n.props.cost,cancelClick:n.cancelOrderHandler,ingredients:n.props.ingr});return n.state.loading&&(e=a.a.createElement(me,null)),e},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.ingredientInit()}},{key:"render",value:function(){var e=Object(M.a)({},this.props.ingr);for(var t in e)e[t]=e[t]<=0;var n=this.handleLoading(),r=null;return r=this.props.ingr?a.a.createElement(a.a.Fragment,null,a.a.createElement(X,{ingredients:this.props.ingr}),a.a.createElement(ee,{removeHandler:this.props.onIgredientDelete,addHandler:this.props.onIgredientAdd,disabledInfo:e,cost:this.props.cost,orderBlocked:this.possibleOrderHandler(this.props.ingr),wasOrdererClick:this.wasOrderedHandler})):a.a.createElement(me,null),this.props.error&&(r=a.a.createElement("div",null,"Burger can't be loaded!")),a.a.createElement(a.a.Fragment,null,a.a.createElement(re,{show:this.state.wasOrdered,click:this.cancelOrderHandler},n),r)}}]),t}(a.a.Component),_e=Object(p.b)(function(e){return{ingr:e.burgerBuilder.ingredients,cost:e.burgerBuilder.cost,error:e.burgerBuilder.error,isAuth:null!==e.login.token,isBuilded:e.burgerBuilder.isBuilded}},function(e){return{onIgredientAdd:function(t){return e(function(e){return{type:"ADD_INGREDIENT",ingredientName:e}}(t))},onIgredientDelete:function(t){return e(function(e){return{type:"REMOVE_INGREDIENT",ingredientName:e}}(t))},ingredientInit:function(){return e(function(e){se.get("/ingredients.json/").then(function(t){e({type:"INIT_INGRIDIENTS",ingredients:t.data})}).catch(e({type:"INIT_INGRIDIENTS_FAIL"}))})},orderInit:function(){return e({type:"BURGER_ORDER_INIT"})},changeURL:function(t){return e(ve(t))}}})(ge(be,se)),Oe=n(55),ke=n.n(Oe),ye=function(e){return a.a.createElement("div",{className:ke.a.CheckoutSummary},a.a.createElement("h1",null,"Thats your burger, bon'apetit!"),a.a.createElement("div",{style:{width:"300px",height:"300px",margin:"auto"}},a.a.createElement(X,{ingredients:e.ingredients})),a.a.createElement(ie,{buttonType:"Danger",click:e.cancelFunction},"Cancel"),a.a.createElement(ie,{buttonType:"Success",click:e.continueFunction},"Continue"))},Ie=n(16),Ce=n(56),Ne=n.n(Ce),Se=n(24),je=n.n(Se),Be=function(e){var t=null,n=[je.a.InputElement];switch(!e.isValid&&e.shouldValid&&e.moded&&n.push(je.a.Invalid),e.elementType){case"input":t=a.a.createElement("input",Object.assign({className:n.join(" ")},e.elementConfig,{value:e.value,onChange:e.change}));break;case"textarea":t=a.a.createElement("textarea",Object.assign({className:n.join(" ")},e,{value:e.value,onChange:e.change}));break;case"select":t=a.a.createElement("select",{className:n.join(" "),value:e.value,onChange:e.change},e.elementConfig.options.map(function(e){return a.a.createElement("option",{key:e.value,value:e.value},e.displayValue)}));break;default:t=a.a.createElement("input",Object.assign({className:je.a.InputElement},e,{value:e.value,onChange:e.change}))}return a.a.createElement("div",null,a.a.createElement("label",{className:je.a.Label},e.labelText),t)},we=function(e,t){var n=!0;return t.required?(n=""!==e.trim()&&n,t.minLength&&(n=e.length>=t.minLength&&n),t.maxLength&&(n=e.length<=t.maxLength&&n),t.isEmail&&(n=/\S+@\S+\.\S+/.test(e)&&n)):n=!0,n},De=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).state={orderForm:{name:{elementType:"input",elementConfig:{type:"text",placeholder:"Your name",name:"name"},value:"",validation:{required:!0},valid:!1,moded:!1},email:{elementType:"input",elementConfig:{type:"text",placeholder:"Your Email",name:"email"},value:"",validation:{required:!0},valid:!1,moded:!1},adress:{elementType:"input",elementConfig:{type:"text",placeholder:"Your Adress",name:"adress"},value:"",validation:{required:!0,minLength:5,maxLength:100},valid:!1,moded:!1},delivery:{elementType:"select",elementConfig:{options:[{value:"fast",displayValue:"Fast"},{value:"cheap",displayValue:"Cheap"}]},value:"fast",valid:!0,validation:{}}},formIsValid:!1,loading:!1},n.changeValHandler=function(e,t){var r=Object(M.a)({},n.state.orderForm),a=Object(M.a)({},n.state.orderForm[t]);a.value=e.target.value,a.valid=we(a.value,a.validation),a.moded=!0,r[t]=a;var o=!0;for(var i in r)o=r[i].valid&&o;n.setState({orderForm:r,formIsValid:o})},n.submitHandler=function(e){e.preventDefault()},n.orderHandler=function(e){e.preventDefault();var t={};for(var r in n.state.orderForm)t[r]=n.state.orderForm[r].value;var a={ingredients:n.props.ingr,cost:n.props.cost,orderData:t,userId:n.props.userId};n.props.handleBurgerOrder(a,n.props.token)},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=[];for(var n in this.state.orderForm)t.push({id:n,config:this.state.orderForm[n]});var r=a.a.createElement("form",{onSubmit:this.orderHandler},a.a.createElement("h4",null,"Your order data: "),t.map(function(t){return a.a.createElement(Be,{key:t.id,elementType:t.config.elementType,elementConfig:t.config.elementConfig,value:t.config.value,isValid:t.config.valid,shouldValid:t.config.validation,moded:t.config.moded,change:function(n){return e.changeValHandler(n,t.id)}})}),a.a.createElement(ie,{buttonType:"Success",disabled:!this.state.formIsValid},"ORDER!"));return this.props.loading&&(r=a.a.createElement(me,null)),a.a.createElement("div",{className:Ne.a.ContactData},r)}}]),t}(a.a.Component),Re=Object(p.b)(function(e){return{ingr:e.burgerBuilder.ingredients,cost:e.burgerBuilder.cost,loading:e.order.loading,userId:e.login.userId,token:e.login.token}},function(e){return{handleBurgerOrder:function(t,n){return e(function(e,t){return function(n){n({type:"BURGER_ORDER_LOAD"});var r="/orders.json?auth="+t;se.post(r,e).then(function(t){n({type:"BURGER_ORDER_SUCCESS",id:t.data.name,orderData:e,error:null})}).catch(function(e){n(function(e){return{type:"BURGER_ORDER_FAIL",error:e}}(e))})}}(t,n))}}})(ge(De,se)),Le=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).checkoutCancel=function(){n.props.history.goBack()},n.checkoutContinue=function(){n.props.history.replace("checkout/contact-data")},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=a.a.createElement(Ie.a,{to:"/"}),t=this.props.purchased?a.a.createElement(Ie.a,{to:"/"}):null;return this.props.ingr&&(e=a.a.createElement("div",null,t,a.a.createElement(ye,{ingredients:this.props.ingr,cancelFunction:this.checkoutCancel,continueFunction:this.checkoutContinue}),a.a.createElement(Ie.b,{path:this.props.match.path+"/contact-data",component:Re}))),e}}]),t}(a.a.Component),Te=Object(p.b)(function(e){return{ingr:e.burgerBuilder.ingredients,purchased:e.order.purchased}})(Le),Ae=n(57),xe=n.n(Ae),Fe=function(e){var t=[];for(var n in e.ingredients)t.push({name:n,val:e.ingredients[n]});var r=t.map(function(e){return a.a.createElement("span",{key:e.name}," ",e.name,":(",e.val,") ")});return a.a.createElement("div",{className:xe.a.Order,key:e.id},a.a.createElement("p",null,"item ",r),a.a.createElement("p",null,"Total cost ",a.a.createElement("b",null,e.cost)))},He=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.handleFetchOrders(this.props.token,this.props.userId)}},{key:"render",value:function(){var e=a.a.createElement(me,null);return this.props.loading||(e=a.a.createElement("div",null,this.props.orders.map(function(e){return a.a.createElement(Fe,{key:e.id,ingredients:e.ingredients,cost:e.cost})}))),e}}]),t}(a.a.Component),Ge=Object(p.b)(function(e){return{loading:e.order.loading,orders:e.order.orders,token:e.login.token,userId:e.login.userId}},function(e){return{handleFetchOrders:function(t,n){return e(function(e,t){return function(n){n({type:"FETCH_ORDERS_LOAD"});var r="/orders.json?auth="+e+'&orderBy="userId"&equalTo="'+t+'"gi';se.get(r).then(function(e){var t=[];for(var r in e.data)t.push(Object(M.a)({},e.data[r],{id:r}));n({type:"FETCH_ORDERS_SUCCESS",fetchedOrders:t})}).catch(function(e){n(function(e){return{type:"FETCH_ORDERS_FAIL",error:e}}(e))})}}(t,n))}}})(ge(He,se)),Ue=n(17),Me=n(58),Ve=n.n(Me),qe=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).state={inputs:{email:{elementType:"input",elementConfig:{type:"text",placeholder:"Email",name:"email "},value:"",validation:{required:!0,isEmail:!0},valid:!1,moded:!1},password:{elementType:"input",elementConfig:{type:"password",placeholder:"Password",name:"password"},value:"",validation:{required:!0,minLength:5},valid:!1,moded:!1}},register:!0},n.changeValHandler=function(e,t){var r=Object(M.a)({},n.state.inputs,Object(Ue.a)({},t,Object(M.a)({},n.state.inputs[t],{value:e.target.value,valid:we(e.target.value,n.state.inputs[t].validation),moded:!0})));n.setState({inputs:r})},n.handleLoginClick=function(e){e.preventDefault(),n.props.loginHandle(n.state.inputs.email.value,n.state.inputs.password.value,n.state.register)},n.changeMethod=function(){n.setState(function(e){return{register:!e.register}})},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.isBuilded||"/"===this.props.redirectUrl||this.props.redirectUrl()}},{key:"render",value:function(){var e=this,t=[];for(var n in this.state.inputs)t.push({id:n,config:this.state.inputs[n]});var o=t.map(function(t){return a.a.createElement(Be,{key:t.id,elementType:t.config.elementType,elementConfig:t.config.elementConfig,value:t.config.value,isValid:t.config.valid,shouldValid:t.config.validation,moded:t.config.moded,change:function(n){return e.changeValHandler(n,t.id)}})}),i=this.state.register?"login":"register",l=null;l=this.props.loading?a.a.createElement(me,null):a.a.createElement(r.Fragment,null,a.a.createElement("h2",null,this.state.register?"Register new user":"Login"),a.a.createElement("form",null,o,a.a.createElement(ie,{buttonType:"Success",click:this.handleLoginClick},"Confirm")),a.a.createElement(ie,{buttonType:"Danger",click:this.changeMethod},"Switch to: ",i));var c=null;this.props.error&&(c=a.a.createElement("p",null,this.props.error));var u=null;return this.props.isAuth&&(u=a.a.createElement(Ie.a,{to:this.props.urlRedirect})),a.a.createElement("div",{className:Ve.a.LoginScreen},u,c,l)}}]),t}(r.Component),Pe=Object(p.b)(function(e){return{loading:e.login.load,error:e.login.error,isAuth:null!==e.login.token,urlRedirect:e.login.urlRedirect,isBuilded:e.burgerBuilder.isBuilded}},function(e){return{loginHandle:function(t,n,r){return e(function(e,t,n){return function(r){r({type:"LOGIN_START"});var a={email:e,password:t,returnSecureToken:!0},o=null;o=n?"https://www.googleapis.com/identitytoolkit/v3/relyingparty/signupNewUser?key="+Object({NODE_ENV:"production",PUBLIC_URL:"/burgerapp"}).REACT_APP_FIREBASE_KEY:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/verifyPassword?key="+Object({NODE_ENV:"production",PUBLIC_URL:"/burgerapp"}).REACT_APP_FIREBASE_KEY,ue.a.post(o,a).then(function(e){var t=new Date((new Date).getTime()+1e3*e.data.expiresIn);localStorage.setItem("token",e.data.idToken),localStorage.setItem("expirationDate",t),localStorage.setItem("userId",e.data.localId),r(he(e.data.idToken,e.data.localId)),r(Ee(e.data.expiresIn))}).catch(function(e){r({type:"LOGIN_FAIL",error:e.response.data.error.message})})}}(t,n,r))},redirectUrl:function(){return e(ve("/"))}}})(qe),Ye=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.logUserOut()}},{key:"render",value:function(){return a.a.createElement(Ie.a,{to:"/"})}}]),t}(r.Component),Qe=Object(p.b)(null,function(e){return{logUserOut:function(){return e(fe())}}})(Ye),We=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.checkLoginStatus()}},{key:"render",value:function(){var e=a.a.createElement(Ie.d,null,a.a.createElement(Ie.b,{path:"/",exact:!0,component:_e}),a.a.createElement(Ie.b,{path:"/login",component:Pe}),a.a.createElement(Ie.a,{to:"/"}));return this.props.isAuth&&(e=a.a.createElement(Ie.d,null,a.a.createElement(Ie.b,{path:"/login",component:Pe}),a.a.createElement(Ie.b,{path:"/checkout",component:Te}),a.a.createElement(Ie.b,{path:"/orders",component:Ge}),a.a.createElement(Ie.b,{path:"/logout",component:Qe}),a.a.createElement(Ie.b,{path:"/",exact:!0,component:_e}),a.a.createElement(Ie.a,{to:"/"}))),a.a.createElement("div",null,a.a.createElement(U,null,e))}}]),t}(r.Component),Xe=Object(Ie.f)(Object(p.b)(function(e){return{isAuth:null!==e.login.token}},function(e){return{checkLoginStatus:function(){return e(function(e){var t=localStorage.getItem("token"),n=localStorage.getItem("userId");if(t){var r=new Date(localStorage.getItem("expirationDate"));r>new Date?(e(he(t,n)),e(Ee((r.getTime()-(new Date).getTime())/100))):e(fe())}else e(fe())})}}})(We));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ke=n(18),Ze=function(e,t){return Object(M.a)({},e,t)},Je={ingredients:{},cost:2,error:null,isBuilded:!1},$e={salad:.2,bacon:1,cheese:.5,meat:2},ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_INGREDIENT":return function(e,t){var n=Object(Ue.a)({},t.ingredientName,e.ingredients[t.ingredientName]+1);return{ingredients:Ze(e.ingredients,n),cost:e.cost+$e[t.ingredientName],isBuilded:!0}}(e,t);case"REMOVE_INGREDIENT":return function(e,t){var n=Object(Ue.a)({},t.ingredientName,e.ingredients[t.ingredientName]-1);return{ingredients:Ze(e.ingredients,n),cost:e.cost+$e[t.ingredientName],isBuilded:!0}}(e,t);case"INIT_INGRIDIENTS":return Ze(e,{cost:2,ingredients:t.ingredients,error:!1,isBuilded:!1});case"INIT_INGRIDIENTS_FAIL":return Ze(e,{error:!0});default:return e}},et={loading:!1,orders:[],purchased:!1,error:null},tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BURGER_ORDER_SUCCESS":var n=Object(M.a)({},t.orderData,{id:t.id});return Ze(e,{orders:e.orders.concat(n),loading:!1,purchased:!0});case"BURGER_ORDER_FAIL":return Ze(e,{error:t.error,loading:!1});case"BURGER_ORDER_LOAD":return Ze(e,{loading:!0});case"BURGER_ORDER_INIT":return Ze(e,{purchased:!1});case"FETCH_ORDERS_LOAD":return Ze(e,{loading:!0});case"FETCH_ORDERS_FAIL":return Ze(e,{loading:!1,error:t.error});case"FETCH_ORDERS_SUCCESS":return Ze(e,{orders:t.fetchedOrders,loading:!1});default:return e}},nt={token:null,userId:null,error:null,load:!1,urlRedirect:"/"},rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":return Ze(e,{token:t.token,userId:t.userId,load:!1,error:null});case"LOGIN_START":return Ze(e,{load:!0,error:null});case"LOGIN_FAIL":return Ze(e,{error:t.error,load:!1});case"LOGIN_LOGOUT":return Ze(e,{userId:null,token:null});case"REDIRECT_CHANGE":return Ze(e,{urlRedirect:t.urlRedirect});default:return e}},at=n(59);n(93).config();var ot=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ke.d,it=Object(Ke.c)({burgerBuilder:ze,order:tt,login:rt}),lt=Object(Ke.e)(it,ot(Object(Ke.a)(at.a)));i.a.render(a.a.createElement(p.a,{store:lt},a.a.createElement(N.a,null,a.a.createElement(Xe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[61,1,2]]]);
//# sourceMappingURL=main.d7f98527.chunk.js.map